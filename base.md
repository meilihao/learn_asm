# base

## 汇编语法
### 符号/标签
用来标记程序或数据的位置, 表示它将在汇编或链接过程中被指定内容替换. 引用该符号时就是引用其地址(汇编器在汇编时会用地址取代它).

格式:
```asm
<xxx>:
	...
```

`xxx`是一个符号, 后跟一个`:`和它定义的内容.

### 汇编指令/伪指令
在汇编代码中, 任何以`.`开头的指令都不会被直接编译成机器指令, 这些指令是针对汇编器的指令, 与机器指令集无关, 因此也被成为汇编指令(assembler directives)或为伪指令(pseudo-operations).

具体汇编指令见[这里](assembler_directives.md).

## 寄存器
一些寄存器只有特殊指令可访问, 比如`rip`, `rflags`.

在x86 32bit os上, 寄存器用前缀`e`标识, x86_64 64bit os上用前缀`r`标识.

### 通用寄存器
### 专用寄存器
- rbp
- rsp
- rip
- rflags

## 寻址
- 立即寻址 : `movq $1, %rax`, 用`$`表示立即寻址, 没有`$`时表示直接寻址
- 直接寻址 : `movq 1, %rax`, 将地址1开始的内容(8B)放入rax.
- 索引寻址 : `movq string_start(, %ecx, 1) %eax`, `地址或偏移(%基址或偏移量寄存器, %索引寄存器, 比例因子)`, addr = `地址或偏移 + %基址或偏移量寄存器 + %索引寄存器*比例因子`
- 间接寻址 : `movq (%rax), %rbx`, 从寄存器指定的地址加载值
- 基址寻址 : `movq 4(%rax), %rbx`, addr =  (%rax) + 4

## 中断
中断会中断正常的流程, 把控制权从应用程序转给kernel的中断处理程序.